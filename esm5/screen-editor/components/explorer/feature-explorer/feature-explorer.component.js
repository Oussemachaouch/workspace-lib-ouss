/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component } from '@angular/core';
import { ConfirmationService } from 'primeng/api';
var FeatureExplorerComponent = /** @class */ (function () {
    function FeatureExplorerComponent(confirmationService) {
        this.confirmationService = confirmationService;
    }
    /* ngOnInit() {
       this.featuresTreeNodes$ = this.featuresManagement
         .select(getFeaturesToDisplay)
         .pipe(
           filter(Boolean),
           map((featuresState: FeatureState[]) =>
             featuresState.map(featureState =>
               this.getFeatureTreeNode(featureState, featureState.expaneded)
             )
           )
         );
     }*/
    /* ngOnInit() {
        this.featuresTreeNodes$ = this.featuresManagement
          .select(getFeaturesToDisplay)
          .pipe(
            filter(Boolean),
            map((featuresState: FeatureState[]) =>
              featuresState.map(featureState =>
                this.getFeatureTreeNode(featureState, featureState.expaneded)
              )
            )
          );
      }*/
    /**
     * @return {?}
     */
    FeatureExplorerComponent.prototype.ngOnInit = /* ngOnInit() {
        this.featuresTreeNodes$ = this.featuresManagement
          .select(getFeaturesToDisplay)
          .pipe(
            filter(Boolean),
            map((featuresState: FeatureState[]) =>
              featuresState.map(featureState =>
                this.getFeatureTreeNode(featureState, featureState.expaneded)
              )
            )
          );
      }*/
    /**
     * @return {?}
     */
    function () { };
    FeatureExplorerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'sc-feature-explorer',
                    template: "<!--<ng-container *ngIf=\"featuresTreeNodes$ | async as featuresTreeNodes; else loading\">\n  <p-tree *ngIf=\"featuresTreeNodes.length > 0; else noFeatureFound\" class=\"features-tree\" [value]=\"featuresTreeNodes\"\n    (onNodeExpand)=\"expandFeatureNode($event.node)\" (onNodeCollapse)=\"collapseFeatureNode($event.node)\"\n    selectionMode=\"single\" [(selection)]=\"selectedNode\">\n    <ng-template let-node pTemplate=\"feature\">\n      <div class=\"custom-node-label\">\n        <div class=\"node-label\">\n          <span>{{ node.label }}</span>\n          <span class=\"node-count\">({{ node.count }})</span>\n        </div>\n        <div *ngIf=\"node.updated\" class=\"node-updated\">\n          <div class=\"indecator\"></div>\n        </div>\n        <div class=\"node-actions\">\n          <p-button class=\"add-screen\" (click)=\"openAddScreensDialog(node)\" icon=\"fa fa-fw fa-plus\"\n            pTooltip=\"Add Screen\" tooltipPosition=\"bottom\"></p-button>\n          <p-button class=\"remove-tree-node\" (click)=\"deleteFeature(node)\" icon=\"fa fa-fw fa-trash\" pTooltip=\"Delete\"\n            tooltipPosition=\"bottom\"></p-button>\n        </div>\n      </div>\n    </ng-template>\n\n    <ng-template let-node pTemplate=\"screen\">\n      <div class=\"custom-node-label\">\n        <span class=\"custom-node-icon\">\n          <i class=\"fas fa-link\" *ngIf=\"node.linked\" pTooltip=\"Linked to {{node.linked}} model\"\n            tooltipPosition=\"bottom\"></i>\n          <i class=\"fas fa-unlink\" *ngIf=\"!node.linked\" pTooltip=\"Not linked to a model\" tooltipPosition=\"bottom\"></i>\n        </span>\n        <div class=\"node-label\">\n          <span>{{ node.label }}</span>\n        </div>\n        <div *ngIf=\"node.updated\" class=\"node-updated\">\n          <div class=\"indecator\"></div>\n        </div>\n        <sc-policy-state-indicator [screenContent]=\"node.data\"></sc-policy-state-indicator>\n        <div class=\"node-actions\">\n          <p-button class=\"clone-node\" (click)=\"openCloneScreenDialo(node)\" icon=\"fa fa-fw fa-copy\" pTooltip=\"Clone\"\n            tooltipPosition=\"bottom\"></p-button>\n          <p-button class=\"edit-feature\" (click)=\"editFeatureScreen(node)\" icon=\"fa fa-fw fa-pen\" pTooltip=\"Edit\"\n            tooltipPosition=\"bottom\"></p-button>\n          <p-button class=\"preview-screen\" icon=\"fa fa-fw fa-eye\" (click)=\"preview(node)\" pTooltip=\"Preview\"\n            tooltipPosition=\"bottom\" showDelay=\"1000\" hideDelay=\"500\"></p-button>\n          <p-button class=\"remove-tree-node\" (click)=\"deleteScreen(node)\" icon=\"fa fa-fw fa-trash\" pTooltip=\"Delete\"\n            tooltipPosition=\"bottom\"></p-button>\n        </div>\n      </div>\n    </ng-template>\n  </p-tree>\n  <ng-template #noFeatureFound>\n    <span class=\"no-match-found-msg\">\n      No feature found\n    </span>\n  </ng-template>\n</ng-container>\n<ng-template #loading>\n  <span class=\"no-match-found-msg\">\n    loading\n  </span>\n</ng-template>\n-->\n",
                    styles: [".no-match-found-msg{margin:-20px auto auto;padding:10px 85px;position:absolute;top:50%}:host ::ng-deep .ui-tree{width:100%;border:none}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .add-screen .ui-button{color:#5cb85c;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .remove-tree-node .ui-button{color:#d84315;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .clone-node .ui-button{color:#2399e5;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .duplicate-tree-node .ui-button{color:#2399e5;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .edit-feature .ui-button{color:#2399e5;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .preview-screen .ui-button{color:#2399e5;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-treenode-label{width:calc(100% - 38px)}:host ::ng-deep .ui-treenode-children .ui-treenode-label{width:calc(100% - 24px)}:host ::ng-deep .custom-node-label{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:30px}:host ::ng-deep .custom-node-icon{font-size:12px;margin-left:-10px;margin-top:2px;margin-right:2px}:host ::ng-deep .custom-node-icon .fa-unlink{color:#d84315}:host ::ng-deep .node-updated .indecator{width:6px;height:6px;border-radius:50%;background:#78909c;margin-left:2px}:host ::ng-deep .node-label{max-width:190px;overflow:hidden;text-overflow:ellipsis}:host ::ng-deep .node-actions{margin-left:auto;margin-right:0}:host ::ng-deep .node-actions .ui-button{background:0 0;border:none}:host ::ng-deep .node-actions .ui-button:enabled:hover{background:0 0;border:none}:host ::ng-deep .node-actions .ui-button-icon-only{width:20px}:host ::ng-deep .node-actions .edit-feature .ui-button{color:#c6c6c6}:host ::ng-deep .node-actions .preview-screen .ui-button{color:#c6c6c6}:host ::ng-deep .node-actions .remove-tree-node .ui-button{color:#c6c6c6}:host ::ng-deep .node-actions .clone-node .ui-button{color:#c6c6c6}:host ::ng-deep .node-actions .add-screen .ui-button{color:#c6c6c6}:host ::ng-deep .ui-panel.ui-widget .ui-panel-titlebar{padding:0 10px;background:#e0e0e0}:host ::ng-deep .actions-container .ui-button-icon-only{width:1.5em}"]
                }] }
    ];
    /** @nocollapse */
    FeatureExplorerComponent.ctorParameters = function () { return [
        { type: ConfirmationService }
    ]; };
    return FeatureExplorerComponent;
}());
export { FeatureExplorerComponent };
if (false) {
    /** @type {?} */
    FeatureExplorerComponent.prototype.featuresTreeNodes;
    /** @type {?} */
    FeatureExplorerComponent.prototype.selectedNode;
    /** @type {?} */
    FeatureExplorerComponent.prototype.featuresTreeNodes$;
    /**
     * @type {?}
     * @private
     */
    FeatureExplorerComponent.prototype.confirmationService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmVhdHVyZS1leHBsb3Jlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly93b3Jrc3BhY2UtbGliLW91c3MvIiwic291cmNlcyI6WyJzY3JlZW4tZWRpdG9yL2NvbXBvbmVudHMvZXhwbG9yZXIvZmVhdHVyZS1leHBsb3Jlci9mZWF0dXJlLWV4cGxvcmVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFLVixNQUFNLGVBQWUsQ0FBQztBQUl2QixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFTbEQ7SUFXRSxrQ0FDVSxtQkFBd0M7UUFBeEMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtJQUUvQyxDQUFDO0lBRUw7Ozs7Ozs7Ozs7O1FBV0k7Ozs7Ozs7Ozs7Ozs7Ozs7SUFDTCwyQ0FBUTs7Ozs7Ozs7Ozs7Ozs7O0lBQVIsY0FBWSxDQUFDOztnQkE1QlosU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxxQkFBcUI7b0JBQy9CLHUrRkFBZ0Q7O2lCQUVqRDs7OztnQkFiUSxtQkFBbUI7O0lBdU41QiwrQkFBQztDQUFBLEFBOU1ELElBOE1DO1NBek1ZLHdCQUF3Qjs7O0lBQ25DLHFEQUFnQzs7SUFDaEMsZ0RBQXlCOztJQUV6QixzREFBNkM7Ozs7O0lBRzNDLHVEQUFnRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgT3V0cHV0LFxuICBFdmVudEVtaXR0ZXIsXG4gIE9uSW5pdCxcbiAgT25EZXN0cm95XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3RvcmUgfSBmcm9tICdAbmdyeC9zdG9yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAsIGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IENvbmZpcm1hdGlvblNlcnZpY2UgfSBmcm9tICdwcmltZW5nL2FwaSc7XG5cbmltcG9ydCB7IEZlYXR1cmUsIFNjcmVlbiB9IGZyb20gJ0BwYWxteXJhLWRldmtpdC9jb3JlLWFwaS9zaGFyZWQnO1xuXG5pbXBvcnQgeyBVaVRyZWVOb2RlIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3RyZWUtbm9kZSc7XG5pbXBvcnQgeyBOb2RlVHlwZSB9IGZyb20gJy4uLy4uLy4uL21vZGVscy9ub2RlLXR5cGUnO1xuXG5cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnc2MtZmVhdHVyZS1leHBsb3JlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9mZWF0dXJlLWV4cGxvcmVyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vZmVhdHVyZS1leHBsb3Jlci5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEZlYXR1cmVFeHBsb3JlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIGZlYXR1cmVzVHJlZU5vZGVzOiBVaVRyZWVOb2RlW107XG4gIHNlbGVjdGVkTm9kZTogVWlUcmVlTm9kZTtcblxuICBmZWF0dXJlc1RyZWVOb2RlcyQ6IE9ic2VydmFibGU8VWlUcmVlTm9kZVtdPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNvbmZpcm1hdGlvblNlcnZpY2U6IENvbmZpcm1hdGlvblNlcnZpY2UsXG4gICAvLyBwcml2YXRlIGZlYXR1cmVzTWFuYWdlbWVudDogU3RvcmU8RmVhdHVyZXNTdGF0ZT5cbiAgKSB7fVxuXG4gLyogbmdPbkluaXQoKSB7XG4gICAgdGhpcy5mZWF0dXJlc1RyZWVOb2RlcyQgPSB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudFxuICAgICAgLnNlbGVjdChnZXRGZWF0dXJlc1RvRGlzcGxheSlcbiAgICAgIC5waXBlKFxuICAgICAgICBmaWx0ZXIoQm9vbGVhbiksXG4gICAgICAgIG1hcCgoZmVhdHVyZXNTdGF0ZTogRmVhdHVyZVN0YXRlW10pID0+XG4gICAgICAgICAgZmVhdHVyZXNTdGF0ZS5tYXAoZmVhdHVyZVN0YXRlID0+XG4gICAgICAgICAgICB0aGlzLmdldEZlYXR1cmVUcmVlTm9kZShmZWF0dXJlU3RhdGUsIGZlYXR1cmVTdGF0ZS5leHBhbmVkZWQpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICB9Ki9cbm5nT25Jbml0KCkge31cbiAvKmV4cGFuZEZlYXR1cmVOb2RlKGZlYXR1cmVOb2RlOiBVaVRyZWVOb2RlKTogdm9pZCB7XG4gICAgaWYgKCFmZWF0dXJlTm9kZS5jaGlsZHJlbikge1xuICAgICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICAgIGxvYWRGZWF0dXJlKHsgZmVhdHVyZU5hbWU6IGZlYXR1cmVOb2RlLmxhYmVsIH0pXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgICAgdG9nZ2xlRmVhdHVyZSh7IGZlYXR1cmVOYW1lOiBmZWF0dXJlTm9kZS5sYWJlbCB9KVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiovXG4gLyogY29sbGFwc2VGZWF0dXJlTm9kZShmZWF0dXJlTm9kZTogVWlUcmVlTm9kZSkge1xuICAgIHRoaXMuZmVhdHVyZXNNYW5hZ2VtZW50LmRpc3BhdGNoKFxuICAgICAgdG9nZ2xlRmVhdHVyZSh7IGZlYXR1cmVOYW1lOiBmZWF0dXJlTm9kZS5sYWJlbCB9KVxuICAgICk7XG4gIH0qL1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGVkaXQgYSBzY3JlZW5cbiAgICogRmlyZWQgd2hlbiBjbGlja2luZyB0aGUgZWRpdCBzY3JlZW4gYnV0dG9uXG4gICAqIEBwYXJhbSBVaVRyZWVOb2RlIG5vZGUgLSBTY3JlZW4gdG8gZWRpdFxuICAgKi9cbiAgLyplZGl0RmVhdHVyZVNjcmVlbih0cmVlTm9kZTogVWlUcmVlTm9kZSkge1xuICAgIHRoaXMuZmVhdHVyZXNNYW5hZ2VtZW50LmRpc3BhdGNoKFxuICAgICAgZXhwbG9yZVNjcmVlbih7XG4gICAgICAgIGZlYXR1cmVOYW1lOiB0cmVlTm9kZS5wYXJlbnQubGFiZWwsXG4gICAgICAgIHNjcmVlbk5hbWU6IHRyZWVOb2RlLmxhYmVsXG4gICAgICB9KVxuICAgICk7XG4gIH0qL1xuXG4gIC8qKlxuICAgKiBPcGVuIGFkZFNjcmVlbkRpYWxvZ1xuICAgKiBAcGFyYW0gZmVhdHVyZU5vZGUgLSBGZWF0dXJlIG5vZGUuXG4gICAqL1xuIC8qIG9wZW5BZGRTY3JlZW5zRGlhbG9nKGZlYXR1cmVOb2RlOiBVaVRyZWVOb2RlKSB7XG4gICAgaWYgKCFmZWF0dXJlTm9kZS5jaGlsZHJlbikge1xuICAgICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICAgIGxvYWRGZWF0dXJlKHsgZmVhdHVyZU5hbWU6IGZlYXR1cmVOb2RlLmxhYmVsIH0pXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgIG9wZW5EaWFsb2dUb0FkZFNjcmVlbih7IGZlYXR1cmVOYW1lOiBmZWF0dXJlTm9kZS5sYWJlbCB9KVxuICAgICk7XG4gIH0vKlxuXG4gIC8qKlxuICAgKiBDbG9uZSBhIHNjcmVlblxuICAgKiBAcGFyYW0gc2NyZWVuTm9kZSBub2RlIHRvIGJlIGNsb25lZFxuICAgKi9cbiAgLypvcGVuQ2xvbmVTY3JlZW5EaWFsbyhzY3JlZW5Ob2RlOiBVaVRyZWVOb2RlKTogdm9pZCB7XG4gICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICBvcGVuRGlhbG9nVG9DbG9uZVNjcmVlbih7XG4gICAgICAgIGZlYXR1cmVOYW1lOiBzY3JlZW5Ob2RlLnBhcmVudC5sYWJlbCxcbiAgICAgICAgc2NyZWVuTmFtZTogc2NyZWVuTm9kZS5sYWJlbFxuICAgICAgfSlcbiAgICApO1xuICB9Ki9cblxuICAvKnByZXZpZXcodHJlZU5vZGU6IFVpVHJlZU5vZGUpIHtcbiAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgIHByZXZpZXdTY3JlZW4oe1xuICAgICAgICBmZWF0dXJlTmFtZTogdHJlZU5vZGUucGFyZW50LmxhYmVsLFxuICAgICAgICBzY3JlZW5OYW1lOiB0cmVlTm9kZS5sYWJlbFxuICAgICAgfSlcbiAgICApO1xuICB9Ki9cblxuICAvKipcbiAgICogRGVsZXRlIGEgc2NyZWVuXG4gICAqIEBwYXJhbSBub2RlIC0gbm9kZSB0byBkZWxldGVcbiAgICovXG4gLyogZGVsZXRlU2NyZWVuKHNjcmVlbk5vZGU6IFVpVHJlZU5vZGUpIHtcbiAgICBjb25zdCBpY29uID0gJ2ZhIGZhLXRyYXNoJztcbiAgICBjb25zdCBoZWFkZXIgPSAnQ29uZmlybWF0aW9uJztcbiAgICBjb25zdCBtZXNzYWdlID0gYERvIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiR7c2NyZWVuTm9kZS5sYWJlbH1cIiBzY3JlZW4/YDtcbiAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgIGRlbGV0ZVNjcmVlbkZyb21GZWF0dXJlKHtcbiAgICAgICAgZmVhdHVyZU5hbWU6IHNjcmVlbk5vZGUucGFyZW50LmxhYmVsLFxuICAgICAgICBzY3JlZW5OYW1lOiBzY3JlZW5Ob2RlLmxhYmVsXG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5jb25maXJtYXRpb25TZXJ2aWNlLmNvbmZpcm0oe1xuICAgICAgbWVzc2FnZSxcbiAgICAgIGhlYWRlcixcbiAgICAgIGljb24sXG4gICAgICBhY2NlcHQ6ICgpID0+IHtcbiAgICAgICAgW1xuICAgICAgICAgIGNvbmZpcm1EZWxldGVTY3JlZW5Gcm9tRmVhdHVyZSh7XG4gICAgICAgICAgICBmZWF0dXJlTmFtZTogc2NyZWVuTm9kZS5wYXJlbnQubGFiZWwsXG4gICAgICAgICAgICBzY3JlZW5OYW1lOiBzY3JlZW5Ob2RlLmxhYmVsXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYXBwbHlGZWF0dXJlVXBkYXRlcyh7IGZlYXR1cmVOYW1lOiBzY3JlZW5Ob2RlLnBhcmVudC5sYWJlbCB9KVxuICAgICAgICBdLmZvckVhY2goYWN0aW9uID0+IHRoaXMuZmVhdHVyZXNNYW5hZ2VtZW50LmRpc3BhdGNoKGFjdGlvbikpO1xuICAgICAgfSxcbiAgICAgIHJlamVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgICAgICBjYW5jZWxEZWxldGVTY3JlZW5Gcm9tRmVhdHVyZSh7XG4gICAgICAgICAgICBmZWF0dXJlTmFtZTogc2NyZWVuTm9kZS5wYXJlbnQubGFiZWwsXG4gICAgICAgICAgICBzY3JlZW5OYW1lOiBzY3JlZW5Ob2RlLmxhYmVsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSovXG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGZlYXR1cmUgbm9kZS5cbiAgICogQHBhcmFtIGZlYXR1cmVOb2RlIC0gRmVhdHVyZSBub2RlLlxuICAgKi9cbiAgLypkZWxldGVGZWF0dXJlKGZlYXR1cmVOb2RlOiBVaVRyZWVOb2RlKSB7XG4gICAgY29uc3QgaWNvbiA9ICdmYSBmYS10cmFzaCc7XG4gICAgY29uc3QgaGVhZGVyID0gJ0NvbmZpcm1hdGlvbic7XG4gICAgY29uc3QgbWVzc2FnZSA9IGBEbyB5b3Ugd2FudCB0byBkZWxldGUgXCIke2ZlYXR1cmVOb2RlLmxhYmVsfVwiIGZlYXR1cmU/YDtcbiAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgIGRlbGV0ZUZlYXR1cmUoe1xuICAgICAgICBmZWF0dXJlTmFtZTogZmVhdHVyZU5vZGUubGFiZWxcbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLmNvbmZpcm1hdGlvblNlcnZpY2UuY29uZmlybSh7XG4gICAgICBtZXNzYWdlLFxuICAgICAgaGVhZGVyLFxuICAgICAgaWNvbixcbiAgICAgIGFjY2VwdDogKCkgPT4ge1xuICAgICAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgICAgICBjb25maXJtRGVsZXRlRmVhdHVyZSh7XG4gICAgICAgICAgICBmZWF0dXJlTmFtZTogZmVhdHVyZU5vZGUubGFiZWxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIHJlamVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgICAgICBjYW5jZWxEZWxldGVGZWF0dXJlKHtcbiAgICAgICAgICAgIGZlYXR1cmVOYW1lOiBmZWF0dXJlTm9kZS5sYWJlbFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0qL1xuXG4gLyogcHJpdmF0ZSBnZXRGZWF0dXJlVHJlZU5vZGUoXG4gICAgZmVhdHVyZTogRmVhdHVyZVN0YXRlLFxuICAgIGV4cGFuZGVkPzogYm9vbGVhblxuICApOiBVaVRyZWVOb2RlIHtcbiAgICBsZXQgc2NyZWVuc1VpTm9kZTogVWlUcmVlTm9kZVtdO1xuICAgIGlmIChmZWF0dXJlLnNjcmVlbnNTdGF0ZSkge1xuICAgICAgc2NyZWVuc1VpTm9kZSA9IE9iamVjdC5rZXlzKGZlYXR1cmUuc2NyZWVuc1N0YXRlKVxuICAgICAgICAuZmlsdGVyKFxuICAgICAgICAgIGtleSA9PlxuICAgICAgICAgICAgIWZlYXR1cmUuc2NyZWVuc1N0YXRlW2tleV0udG9CZUFkZGVkICYmXG4gICAgICAgICAgICAhZmVhdHVyZS5zY3JlZW5zU3RhdGVba2V5XS5pblRyYXNoXG4gICAgICAgIClcbiAgICAgICAgLm1hcChrZXkgPT4gdGhpcy5jcmVhdGVTY3JlZW5VaU5vZGUoa2V5LCBmZWF0dXJlLnNjcmVlbnNTdGF0ZVtrZXldKSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBsYWJlbDogZmVhdHVyZS5kYXRhLm5hbWUsXG4gICAgICBleHBhbmRlZEljb246ICdmYSBmYS1mb2xkZXItb3BlbicsXG4gICAgICBjb2xsYXBzZWRJY29uOiAnZmEgZmEtZm9sZGVyJyxcbiAgICAgIGxlYWY6IGZhbHNlLFxuICAgICAgY2hpbGRyZW46IHNjcmVlbnNVaU5vZGUsXG4gICAgICB0eXBlOiBOb2RlVHlwZS5GRUFUVVJFLFxuICAgICAgY291bnQ6IGZlYXR1cmUuc2NyZWVuc0NvdW50LFxuICAgICAgZXhwYW5kZWQsXG4gICAgICB1cGRhdGVkOiBmZWF0dXJlLmlzVXBkYXRlZFxuICAgIH07XG4gIH1cbiAgcHJpdmF0ZSBjcmVhdGVTY3JlZW5VaU5vZGUobGFiZWw6IHN0cmluZywgc2NyZWVuOiBTY3JlZW5TdGF0ZSkge1xuICAgIHJldHVybiB7XG4gICAgICBsYWJlbCxcbiAgICAgIC8vIGV4cGFuZGVkSWNvbjogc2NyZWVuLm1vZGVsID8gJ2ZhcyBmYS1saW5rJyA6ICdmYXMgZmEtdW5saW5rJyxcbiAgICAgIC8vIGNvbGxhcHNlZEljb246IHNjcmVlbi5tb2RlbCA/ICdmYXMgZmEtbGluaycgOiAnZmFzIGZhLXVubGluaycsXG4gICAgICB0eXBlOiBOb2RlVHlwZS5TQ1JFRU4sXG4gICAgICB1cGRhdGVkOiBzY3JlZW4uaXNOZXcgfHwgc2NyZWVuLmlzVXBkYXRlZCxcbiAgICAgIGxpbmtlZDogc2NyZWVuLm1vZGVsTmFtZVxuICAgIH07XG4gIH0qL1xufVxuIl19