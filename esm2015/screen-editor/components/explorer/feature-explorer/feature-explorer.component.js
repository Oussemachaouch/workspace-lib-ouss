/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component } from '@angular/core';
import { ConfirmationService } from 'primeng/api';
export class FeatureExplorerComponent {
    /**
     * @param {?} confirmationService
     */
    constructor(confirmationService) {
        this.confirmationService = confirmationService;
    }
    /* ngOnInit() {
        this.featuresTreeNodes$ = this.featuresManagement
          .select(getFeaturesToDisplay)
          .pipe(
            filter(Boolean),
            map((featuresState: FeatureState[]) =>
              featuresState.map(featureState =>
                this.getFeatureTreeNode(featureState, featureState.expaneded)
              )
            )
          );
      }*/
    /**
     * @return {?}
     */
    ngOnInit() { }
}
FeatureExplorerComponent.decorators = [
    { type: Component, args: [{
                selector: 'sc-feature-explorer',
                template: "<!--<ng-container *ngIf=\"featuresTreeNodes$ | async as featuresTreeNodes; else loading\">\n  <p-tree *ngIf=\"featuresTreeNodes.length > 0; else noFeatureFound\" class=\"features-tree\" [value]=\"featuresTreeNodes\"\n    (onNodeExpand)=\"expandFeatureNode($event.node)\" (onNodeCollapse)=\"collapseFeatureNode($event.node)\"\n    selectionMode=\"single\" [(selection)]=\"selectedNode\">\n    <ng-template let-node pTemplate=\"feature\">\n      <div class=\"custom-node-label\">\n        <div class=\"node-label\">\n          <span>{{ node.label }}</span>\n          <span class=\"node-count\">({{ node.count }})</span>\n        </div>\n        <div *ngIf=\"node.updated\" class=\"node-updated\">\n          <div class=\"indecator\"></div>\n        </div>\n        <div class=\"node-actions\">\n          <p-button class=\"add-screen\" (click)=\"openAddScreensDialog(node)\" icon=\"fa fa-fw fa-plus\"\n            pTooltip=\"Add Screen\" tooltipPosition=\"bottom\"></p-button>\n          <p-button class=\"remove-tree-node\" (click)=\"deleteFeature(node)\" icon=\"fa fa-fw fa-trash\" pTooltip=\"Delete\"\n            tooltipPosition=\"bottom\"></p-button>\n        </div>\n      </div>\n    </ng-template>\n\n    <ng-template let-node pTemplate=\"screen\">\n      <div class=\"custom-node-label\">\n        <span class=\"custom-node-icon\">\n          <i class=\"fas fa-link\" *ngIf=\"node.linked\" pTooltip=\"Linked to {{node.linked}} model\"\n            tooltipPosition=\"bottom\"></i>\n          <i class=\"fas fa-unlink\" *ngIf=\"!node.linked\" pTooltip=\"Not linked to a model\" tooltipPosition=\"bottom\"></i>\n        </span>\n        <div class=\"node-label\">\n          <span>{{ node.label }}</span>\n        </div>\n        <div *ngIf=\"node.updated\" class=\"node-updated\">\n          <div class=\"indecator\"></div>\n        </div>\n        <sc-policy-state-indicator [screenContent]=\"node.data\"></sc-policy-state-indicator>\n        <div class=\"node-actions\">\n          <p-button class=\"clone-node\" (click)=\"openCloneScreenDialo(node)\" icon=\"fa fa-fw fa-copy\" pTooltip=\"Clone\"\n            tooltipPosition=\"bottom\"></p-button>\n          <p-button class=\"edit-feature\" (click)=\"editFeatureScreen(node)\" icon=\"fa fa-fw fa-pen\" pTooltip=\"Edit\"\n            tooltipPosition=\"bottom\"></p-button>\n          <p-button class=\"preview-screen\" icon=\"fa fa-fw fa-eye\" (click)=\"preview(node)\" pTooltip=\"Preview\"\n            tooltipPosition=\"bottom\" showDelay=\"1000\" hideDelay=\"500\"></p-button>\n          <p-button class=\"remove-tree-node\" (click)=\"deleteScreen(node)\" icon=\"fa fa-fw fa-trash\" pTooltip=\"Delete\"\n            tooltipPosition=\"bottom\"></p-button>\n        </div>\n      </div>\n    </ng-template>\n  </p-tree>\n  <ng-template #noFeatureFound>\n    <span class=\"no-match-found-msg\">\n      No feature found\n    </span>\n  </ng-template>\n</ng-container>\n<ng-template #loading>\n  <span class=\"no-match-found-msg\">\n    loading\n  </span>\n</ng-template>\n-->\n",
                styles: [".no-match-found-msg{margin:-20px auto auto;padding:10px 85px;position:absolute;top:50%}:host ::ng-deep .ui-tree{width:100%;border:none}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .add-screen .ui-button{color:#5cb85c;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .remove-tree-node .ui-button{color:#d84315;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .clone-node .ui-button{color:#2399e5;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .duplicate-tree-node .ui-button{color:#2399e5;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .edit-feature .ui-button{color:#2399e5;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-tree .ui-treenode-selectable.ui-treenode-content:hover .node-actions .preview-screen .ui-button{color:#2399e5;-webkit-transition-duration:0s;transition-duration:0s}:host ::ng-deep .ui-treenode-label{width:calc(100% - 38px)}:host ::ng-deep .ui-treenode-children .ui-treenode-label{width:calc(100% - 24px)}:host ::ng-deep .custom-node-label{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:30px}:host ::ng-deep .custom-node-icon{font-size:12px;margin-left:-10px;margin-top:2px;margin-right:2px}:host ::ng-deep .custom-node-icon .fa-unlink{color:#d84315}:host ::ng-deep .node-updated .indecator{width:6px;height:6px;border-radius:50%;background:#78909c;margin-left:2px}:host ::ng-deep .node-label{max-width:190px;overflow:hidden;text-overflow:ellipsis}:host ::ng-deep .node-actions{margin-left:auto;margin-right:0}:host ::ng-deep .node-actions .ui-button{background:0 0;border:none}:host ::ng-deep .node-actions .ui-button:enabled:hover{background:0 0;border:none}:host ::ng-deep .node-actions .ui-button-icon-only{width:20px}:host ::ng-deep .node-actions .edit-feature .ui-button{color:#c6c6c6}:host ::ng-deep .node-actions .preview-screen .ui-button{color:#c6c6c6}:host ::ng-deep .node-actions .remove-tree-node .ui-button{color:#c6c6c6}:host ::ng-deep .node-actions .clone-node .ui-button{color:#c6c6c6}:host ::ng-deep .node-actions .add-screen .ui-button{color:#c6c6c6}:host ::ng-deep .ui-panel.ui-widget .ui-panel-titlebar{padding:0 10px;background:#e0e0e0}:host ::ng-deep .actions-container .ui-button-icon-only{width:1.5em}"]
            }] }
];
/** @nocollapse */
FeatureExplorerComponent.ctorParameters = () => [
    { type: ConfirmationService }
];
if (false) {
    /** @type {?} */
    FeatureExplorerComponent.prototype.featuresTreeNodes;
    /** @type {?} */
    FeatureExplorerComponent.prototype.selectedNode;
    /** @type {?} */
    FeatureExplorerComponent.prototype.featuresTreeNodes$;
    /**
     * @type {?}
     * @private
     */
    FeatureExplorerComponent.prototype.confirmationService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmVhdHVyZS1leHBsb3Jlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly93b3Jrc3BhY2UtbGliLW91c3MvIiwic291cmNlcyI6WyJzY3JlZW4tZWRpdG9yL2NvbXBvbmVudHMvZXhwbG9yZXIvZmVhdHVyZS1leHBsb3Jlci9mZWF0dXJlLWV4cGxvcmVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFLVixNQUFNLGVBQWUsQ0FBQztBQUl2QixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFjbEQsTUFBTSxPQUFPLHdCQUF3Qjs7OztJQU1uQyxZQUNVLG1CQUF3QztRQUF4Qyx3QkFBbUIsR0FBbkIsbUJBQW1CLENBQXFCO0lBRS9DLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7SUFjTixRQUFRLEtBQUksQ0FBQzs7O1lBNUJaLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUscUJBQXFCO2dCQUMvQix1K0ZBQWdEOzthQUVqRDs7OztZQWJRLG1CQUFtQjs7OztJQWUxQixxREFBZ0M7O0lBQ2hDLGdEQUF5Qjs7SUFFekIsc0RBQTZDOzs7OztJQUczQyx1REFBZ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIE91dHB1dCxcbiAgRXZlbnRFbWl0dGVyLFxuICBPbkluaXQsXG4gIE9uRGVzdHJveVxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBDb25maXJtYXRpb25TZXJ2aWNlIH0gZnJvbSAncHJpbWVuZy9hcGknO1xuXG5pbXBvcnQgeyBGZWF0dXJlLCBTY3JlZW4gfSBmcm9tICdAcGFsbXlyYS1kZXZraXQvY29yZS1hcGkvc2hhcmVkJztcblxuaW1wb3J0IHsgVWlUcmVlTm9kZSB9IGZyb20gJy4uLy4uLy4uL21vZGVscy90cmVlLW5vZGUnO1xuaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvbm9kZS10eXBlJztcblxuXG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3NjLWZlYXR1cmUtZXhwbG9yZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vZmVhdHVyZS1leHBsb3Jlci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2ZlYXR1cmUtZXhwbG9yZXIuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBGZWF0dXJlRXhwbG9yZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBmZWF0dXJlc1RyZWVOb2RlczogVWlUcmVlTm9kZVtdO1xuICBzZWxlY3RlZE5vZGU6IFVpVHJlZU5vZGU7XG5cbiAgZmVhdHVyZXNUcmVlTm9kZXMkOiBPYnNlcnZhYmxlPFVpVHJlZU5vZGVbXT47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjb25maXJtYXRpb25TZXJ2aWNlOiBDb25maXJtYXRpb25TZXJ2aWNlLFxuICAgLy8gcHJpdmF0ZSBmZWF0dXJlc01hbmFnZW1lbnQ6IFN0b3JlPEZlYXR1cmVzU3RhdGU+XG4gICkge31cblxuIC8qIG5nT25Jbml0KCkge1xuICAgIHRoaXMuZmVhdHVyZXNUcmVlTm9kZXMkID0gdGhpcy5mZWF0dXJlc01hbmFnZW1lbnRcbiAgICAgIC5zZWxlY3QoZ2V0RmVhdHVyZXNUb0Rpc3BsYXkpXG4gICAgICAucGlwZShcbiAgICAgICAgZmlsdGVyKEJvb2xlYW4pLFxuICAgICAgICBtYXAoKGZlYXR1cmVzU3RhdGU6IEZlYXR1cmVTdGF0ZVtdKSA9PlxuICAgICAgICAgIGZlYXR1cmVzU3RhdGUubWFwKGZlYXR1cmVTdGF0ZSA9PlxuICAgICAgICAgICAgdGhpcy5nZXRGZWF0dXJlVHJlZU5vZGUoZmVhdHVyZVN0YXRlLCBmZWF0dXJlU3RhdGUuZXhwYW5lZGVkKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgfSovXG5uZ09uSW5pdCgpIHt9XG4gLypleHBhbmRGZWF0dXJlTm9kZShmZWF0dXJlTm9kZTogVWlUcmVlTm9kZSk6IHZvaWQge1xuICAgIGlmICghZmVhdHVyZU5vZGUuY2hpbGRyZW4pIHtcbiAgICAgIHRoaXMuZmVhdHVyZXNNYW5hZ2VtZW50LmRpc3BhdGNoKFxuICAgICAgICBsb2FkRmVhdHVyZSh7IGZlYXR1cmVOYW1lOiBmZWF0dXJlTm9kZS5sYWJlbCB9KVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICAgIHRvZ2dsZUZlYXR1cmUoeyBmZWF0dXJlTmFtZTogZmVhdHVyZU5vZGUubGFiZWwgfSlcbiAgICAgICk7XG4gICAgfVxuICB9XG4qL1xuIC8qIGNvbGxhcHNlRmVhdHVyZU5vZGUoZmVhdHVyZU5vZGU6IFVpVHJlZU5vZGUpIHtcbiAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgIHRvZ2dsZUZlYXR1cmUoeyBmZWF0dXJlTmFtZTogZmVhdHVyZU5vZGUubGFiZWwgfSlcbiAgICApO1xuICB9Ki9cblxuICAvKipcbiAgICogVXNlZCB0byBlZGl0IGEgc2NyZWVuXG4gICAqIEZpcmVkIHdoZW4gY2xpY2tpbmcgdGhlIGVkaXQgc2NyZWVuIGJ1dHRvblxuICAgKiBAcGFyYW0gVWlUcmVlTm9kZSBub2RlIC0gU2NyZWVuIHRvIGVkaXRcbiAgICovXG4gIC8qZWRpdEZlYXR1cmVTY3JlZW4odHJlZU5vZGU6IFVpVHJlZU5vZGUpIHtcbiAgICB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChcbiAgICAgIGV4cGxvcmVTY3JlZW4oe1xuICAgICAgICBmZWF0dXJlTmFtZTogdHJlZU5vZGUucGFyZW50LmxhYmVsLFxuICAgICAgICBzY3JlZW5OYW1lOiB0cmVlTm9kZS5sYWJlbFxuICAgICAgfSlcbiAgICApO1xuICB9Ki9cblxuICAvKipcbiAgICogT3BlbiBhZGRTY3JlZW5EaWFsb2dcbiAgICogQHBhcmFtIGZlYXR1cmVOb2RlIC0gRmVhdHVyZSBub2RlLlxuICAgKi9cbiAvKiBvcGVuQWRkU2NyZWVuc0RpYWxvZyhmZWF0dXJlTm9kZTogVWlUcmVlTm9kZSkge1xuICAgIGlmICghZmVhdHVyZU5vZGUuY2hpbGRyZW4pIHtcbiAgICAgIHRoaXMuZmVhdHVyZXNNYW5hZ2VtZW50LmRpc3BhdGNoKFxuICAgICAgICBsb2FkRmVhdHVyZSh7IGZlYXR1cmVOYW1lOiBmZWF0dXJlTm9kZS5sYWJlbCB9KVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICBvcGVuRGlhbG9nVG9BZGRTY3JlZW4oeyBmZWF0dXJlTmFtZTogZmVhdHVyZU5vZGUubGFiZWwgfSlcbiAgICApO1xuICB9LypcblxuICAvKipcbiAgICogQ2xvbmUgYSBzY3JlZW5cbiAgICogQHBhcmFtIHNjcmVlbk5vZGUgbm9kZSB0byBiZSBjbG9uZWRcbiAgICovXG4gIC8qb3BlbkNsb25lU2NyZWVuRGlhbG8oc2NyZWVuTm9kZTogVWlUcmVlTm9kZSk6IHZvaWQge1xuICAgIHRoaXMuZmVhdHVyZXNNYW5hZ2VtZW50LmRpc3BhdGNoKFxuICAgICAgb3BlbkRpYWxvZ1RvQ2xvbmVTY3JlZW4oe1xuICAgICAgICBmZWF0dXJlTmFtZTogc2NyZWVuTm9kZS5wYXJlbnQubGFiZWwsXG4gICAgICAgIHNjcmVlbk5hbWU6IHNjcmVlbk5vZGUubGFiZWxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSovXG5cbiAgLypwcmV2aWV3KHRyZWVOb2RlOiBVaVRyZWVOb2RlKSB7XG4gICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICBwcmV2aWV3U2NyZWVuKHtcbiAgICAgICAgZmVhdHVyZU5hbWU6IHRyZWVOb2RlLnBhcmVudC5sYWJlbCxcbiAgICAgICAgc2NyZWVuTmFtZTogdHJlZU5vZGUubGFiZWxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSovXG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHNjcmVlblxuICAgKiBAcGFyYW0gbm9kZSAtIG5vZGUgdG8gZGVsZXRlXG4gICAqL1xuIC8qIGRlbGV0ZVNjcmVlbihzY3JlZW5Ob2RlOiBVaVRyZWVOb2RlKSB7XG4gICAgY29uc3QgaWNvbiA9ICdmYSBmYS10cmFzaCc7XG4gICAgY29uc3QgaGVhZGVyID0gJ0NvbmZpcm1hdGlvbic7XG4gICAgY29uc3QgbWVzc2FnZSA9IGBEbyB5b3Ugd2FudCB0byBkZWxldGUgXCIke3NjcmVlbk5vZGUubGFiZWx9XCIgc2NyZWVuP2A7XG4gICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICBkZWxldGVTY3JlZW5Gcm9tRmVhdHVyZSh7XG4gICAgICAgIGZlYXR1cmVOYW1lOiBzY3JlZW5Ob2RlLnBhcmVudC5sYWJlbCxcbiAgICAgICAgc2NyZWVuTmFtZTogc2NyZWVuTm9kZS5sYWJlbFxuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuY29uZmlybWF0aW9uU2VydmljZS5jb25maXJtKHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBoZWFkZXIsXG4gICAgICBpY29uLFxuICAgICAgYWNjZXB0OiAoKSA9PiB7XG4gICAgICAgIFtcbiAgICAgICAgICBjb25maXJtRGVsZXRlU2NyZWVuRnJvbUZlYXR1cmUoe1xuICAgICAgICAgICAgZmVhdHVyZU5hbWU6IHNjcmVlbk5vZGUucGFyZW50LmxhYmVsLFxuICAgICAgICAgICAgc2NyZWVuTmFtZTogc2NyZWVuTm9kZS5sYWJlbFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGFwcGx5RmVhdHVyZVVwZGF0ZXMoeyBmZWF0dXJlTmFtZTogc2NyZWVuTm9kZS5wYXJlbnQubGFiZWwgfSlcbiAgICAgICAgXS5mb3JFYWNoKGFjdGlvbiA9PiB0aGlzLmZlYXR1cmVzTWFuYWdlbWVudC5kaXNwYXRjaChhY3Rpb24pKTtcbiAgICAgIH0sXG4gICAgICByZWplY3Q6ICgpID0+IHtcbiAgICAgICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICAgICAgY2FuY2VsRGVsZXRlU2NyZWVuRnJvbUZlYXR1cmUoe1xuICAgICAgICAgICAgZmVhdHVyZU5hbWU6IHNjcmVlbk5vZGUucGFyZW50LmxhYmVsLFxuICAgICAgICAgICAgc2NyZWVuTmFtZTogc2NyZWVuTm9kZS5sYWJlbFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0qL1xuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmZWF0dXJlIG5vZGUuXG4gICAqIEBwYXJhbSBmZWF0dXJlTm9kZSAtIEZlYXR1cmUgbm9kZS5cbiAgICovXG4gIC8qZGVsZXRlRmVhdHVyZShmZWF0dXJlTm9kZTogVWlUcmVlTm9kZSkge1xuICAgIGNvbnN0IGljb24gPSAnZmEgZmEtdHJhc2gnO1xuICAgIGNvbnN0IGhlYWRlciA9ICdDb25maXJtYXRpb24nO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgRG8geW91IHdhbnQgdG8gZGVsZXRlIFwiJHtmZWF0dXJlTm9kZS5sYWJlbH1cIiBmZWF0dXJlP2A7XG4gICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICBkZWxldGVGZWF0dXJlKHtcbiAgICAgICAgZmVhdHVyZU5hbWU6IGZlYXR1cmVOb2RlLmxhYmVsXG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5jb25maXJtYXRpb25TZXJ2aWNlLmNvbmZpcm0oe1xuICAgICAgbWVzc2FnZSxcbiAgICAgIGhlYWRlcixcbiAgICAgIGljb24sXG4gICAgICBhY2NlcHQ6ICgpID0+IHtcbiAgICAgICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICAgICAgY29uZmlybURlbGV0ZUZlYXR1cmUoe1xuICAgICAgICAgICAgZmVhdHVyZU5hbWU6IGZlYXR1cmVOb2RlLmxhYmVsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICByZWplY3Q6ICgpID0+IHtcbiAgICAgICAgdGhpcy5mZWF0dXJlc01hbmFnZW1lbnQuZGlzcGF0Y2goXG4gICAgICAgICAgY2FuY2VsRGVsZXRlRmVhdHVyZSh7XG4gICAgICAgICAgICBmZWF0dXJlTmFtZTogZmVhdHVyZU5vZGUubGFiZWxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9Ki9cblxuIC8qIHByaXZhdGUgZ2V0RmVhdHVyZVRyZWVOb2RlKFxuICAgIGZlYXR1cmU6IEZlYXR1cmVTdGF0ZSxcbiAgICBleHBhbmRlZD86IGJvb2xlYW5cbiAgKTogVWlUcmVlTm9kZSB7XG4gICAgbGV0IHNjcmVlbnNVaU5vZGU6IFVpVHJlZU5vZGVbXTtcbiAgICBpZiAoZmVhdHVyZS5zY3JlZW5zU3RhdGUpIHtcbiAgICAgIHNjcmVlbnNVaU5vZGUgPSBPYmplY3Qua2V5cyhmZWF0dXJlLnNjcmVlbnNTdGF0ZSlcbiAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICBrZXkgPT5cbiAgICAgICAgICAgICFmZWF0dXJlLnNjcmVlbnNTdGF0ZVtrZXldLnRvQmVBZGRlZCAmJlxuICAgICAgICAgICAgIWZlYXR1cmUuc2NyZWVuc1N0YXRlW2tleV0uaW5UcmFzaFxuICAgICAgICApXG4gICAgICAgIC5tYXAoa2V5ID0+IHRoaXMuY3JlYXRlU2NyZWVuVWlOb2RlKGtleSwgZmVhdHVyZS5zY3JlZW5zU3RhdGVba2V5XSkpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWw6IGZlYXR1cmUuZGF0YS5uYW1lLFxuICAgICAgZXhwYW5kZWRJY29uOiAnZmEgZmEtZm9sZGVyLW9wZW4nLFxuICAgICAgY29sbGFwc2VkSWNvbjogJ2ZhIGZhLWZvbGRlcicsXG4gICAgICBsZWFmOiBmYWxzZSxcbiAgICAgIGNoaWxkcmVuOiBzY3JlZW5zVWlOb2RlLFxuICAgICAgdHlwZTogTm9kZVR5cGUuRkVBVFVSRSxcbiAgICAgIGNvdW50OiBmZWF0dXJlLnNjcmVlbnNDb3VudCxcbiAgICAgIGV4cGFuZGVkLFxuICAgICAgdXBkYXRlZDogZmVhdHVyZS5pc1VwZGF0ZWRcbiAgICB9O1xuICB9XG4gIHByaXZhdGUgY3JlYXRlU2NyZWVuVWlOb2RlKGxhYmVsOiBzdHJpbmcsIHNjcmVlbjogU2NyZWVuU3RhdGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWwsXG4gICAgICAvLyBleHBhbmRlZEljb246IHNjcmVlbi5tb2RlbCA/ICdmYXMgZmEtbGluaycgOiAnZmFzIGZhLXVubGluaycsXG4gICAgICAvLyBjb2xsYXBzZWRJY29uOiBzY3JlZW4ubW9kZWwgPyAnZmFzIGZhLWxpbmsnIDogJ2ZhcyBmYS11bmxpbmsnLFxuICAgICAgdHlwZTogTm9kZVR5cGUuU0NSRUVOLFxuICAgICAgdXBkYXRlZDogc2NyZWVuLmlzTmV3IHx8IHNjcmVlbi5pc1VwZGF0ZWQsXG4gICAgICBsaW5rZWQ6IHNjcmVlbi5tb2RlbE5hbWVcbiAgICB9O1xuICB9Ki9cbn1cbiJdfQ==